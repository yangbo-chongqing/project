{"remainingRequest":"c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\src\\components\\web1910\\xz\\cart.vue?vue&type=style&index=0&id=7effe839&scoped=true&lang=css","dependencies":[{"path":"c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\src\\components\\web1910\\xz\\cart.vue","mtime":1581927005974},{"path":"c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\Administrator\\Desktop\\yangb\\VueUI\\day01\\vue_app_00_null\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* 1:一个商品项目元素 */\r\n.cartItem{\r\n  display:flex;/*弹性布局*/\r\n  justify-content: space-between;/*子元素两端对齐*/\r\n  align-items: center;/*子元素垂直居中*/\r\n  border-bottom:1px solid #555;\r\n  margin-top:25px;\r\n}\r\n/* 2：左侧【商品名称与价格】 */\r\n.leftImgTxt{\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.title{\r\n  margin-left:15px;\r\n}\r\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src\\components\\web1910\\xz","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 1：顶部全选复选框 -->\r\n    <div class=\"selectall\">\r\n      全选<input type=\"checkbox\" v-model=\"allcb\" @change=\"selectAll\">\r\n    </div>\r\n    <!-- 2：购物车商品列表 -->\r\n    <div class=\"cartItem\" v-for=\"(item,i) of list\" :key=\"i\">\r\n      <div class=\"leftImgTxt\">\r\n        <input type=\"checkbox\" @change=\"changeItem\" v-model=\"item.cb\">\r\n        <div class=\"title\">{{item.lname}}</div>\r\n        <div class=\"title\">{{item.price}}</div>\r\n      </div>\r\n      <mt-button @click=\"del(item.id)\">删除</mt-button>\r\n    </div>\r\n    <!-- 3：一组按钮 -->\r\n    <div>\r\n      购物车中商品数量<span style=\"color:red\">{{$store.getters.getCartCount}}</span>\r\n      <!-- 亮哥的发量 <span style=\"color:red\">\r\n        {{$store.getters.getFa}}\r\n      </span>\r\n      <mt-button @click=\"sub\">掉一根</mt-button> -->\r\n      <mt-button @click=\"delm\">删除选中商品</mt-button>\r\n      <mt-button>清空购物车</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      list:[],//购物车列表信息\r\n      allcb:false //全选框状态\r\n    }\r\n  },\r\n  created(){\r\n    // 组件创建成功后 获取购物车列表信息\r\n    this.loadMore()\r\n  },\r\n  methods:{\r\n    sub(){\r\n      // 功能：修改全局共享数据fa\r\n      this.$store.commit(\"subFa\")\r\n    },\r\n    delm(){\r\n      // 功能：删除选中商品\r\n      // 1：判断商品数量 如果数量为0 this.list\r\n      if(this.list.length==0){\r\n      // 2：显示确认框   当前没有可删除商品\r\n        this.$messagebox(\"消息\",\"当前没有可删除商品\")\r\n      // 3：返回\r\n        return\r\n      }\r\n      // 4：创建变量str  目的拼接字符串 \"2,3,4\"\r\n      var str=\"\";\r\n      // 5：创建循环遍历数组 this.list\r\n        for(var i of this.list){\r\n          if(i.cb==true){\r\n            // 6：判断当前商品是否为选中状态 cb==true 获取id拼接字符串str+\",\"\r\n            str+=i.id+\",\"\r\n          }\r\n        }\r\n      // 7：判断：如果用户没有选中商品str.length==0\r\n      if(str.length==0){\r\n      // 8：显示确认框 请选者要删除的商品\r\n        this.$messagebox(\"请选择需要删除的商品\")\r\n        return;\r\n      }\r\n      // 8.1：截取字符串   \"2,3,\"=>\"2,3\"\r\n      str= str.substring(0,str.length-1)\r\n      // 9：显示确认交互框 是否删除指定数据\r\n      // 10：创建变量 url obj\r\n      // 11：发送ajax请求删除指定数据\r\n      this.$messagebox.confirm(\"是否删除指定商品?\").then(res=>{\r\n        var url=\"delm\";\r\n        var obj={id:str}\r\n        this.axios.get(url,{params:obj}).then(res=>{\r\n          // 重新请求数据，刷新页面\r\n          this.loadMore();\r\n          this.$toast(\"删除成功\")\r\n        })\r\n      }).catch(err=>{})\r\n    },\r\n    selectAll(){\r\n      // 功能：全选按钮状态修改操作\r\n      // 1:获取全选按钮状态\r\n      var cb=this.allcb\r\n      // 2：创建循环遍历所有商品状态赋值\r\n      for(var item of this.list){\r\n        item.cb=cb\r\n      }\r\n    },\r\n    changeItem(){\r\n      // 功能：商品状态修改操作\r\n      // 功能一：累加商品状态为true\r\n      var sum=0;\r\n      for(var item of this.list ){\r\n        if(item.cb)sum++;\r\n      }\r\n      // 功能二：判断如果商品总数量与true总量相同\r\n      if(this.list.length==sum){\r\n        this.allcb=true;\r\n      }else{\r\n        this.allcb=false;\r\n      }\r\n    },\r\n    del(id){\r\n      // 1：显示交互对话框\r\n      this.$messagebox.confirm(\"是否删除该商品\").then(res=>{\r\n        //点击确认按钮\r\n         // 2：如果用户选中确认\r\n      // 3：创建变量url 保存中间人删除程序的地址 /del\r\n      var url =\"del\";\r\n      // 4：创建变量obj 保存id\r\n      var obj={id};\r\n      // 5：发送ajax请求\r\n      this.axios.get(url,{params:obj}).then(res=>{\r\n        if(res.data.code==1){\r\n          this.$toast(\"删除成功\")\r\n          this.loadMore()\r\n        }\r\n      })\r\n      // 6：获取返回结果 重新加载数据\r\n      }).catch(err=>{\r\n      })\r\n    },\r\n    loadMore(){\r\n      console.log(11)\r\n      //发送请求获取购物车数据\r\n      // 1：创建变量url\r\n      var url=\"findcart\";\r\n      // 2：发送ajax请求并且获取服务器返回数据\r\n      this.axios.get(url).then(res=>{\r\n        if(res.data.code==-2){\r\n          this.$toast(\"请登录\")\r\n          this.$router.push(\"/login\")\r\n        }else{\r\n        //  this.list=res.data.data\r\n        // 5.1:获取服务器中购物车列表，临时保存变量rows\r\n        var rows= res.data.data\r\n        // 5.2创建循环遍历数组 在每个商品中添加cb属性\r\n        for(var item of rows){\r\n          item.cb=false\r\n        }\r\n        this.list=rows\r\n        }\r\n      })\r\n      var sum=0;\r\n        for(var item of this.list){\r\n          sum+=item.count\r\n        }\r\n        this.$store.commit(\"addCart\",sum)\r\n      // 3：获取服务器返回数据 code==-2 提示请登录 跳转到login\r\n      // 4：获取服务器返回数据  code==1 将服务器返回购物车列表保存list\r\n      // 5：在模板中创建循环显示购物车列表\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n/* 1:一个商品项目元素 */\r\n.cartItem{\r\n  display:flex;/*弹性布局*/\r\n  justify-content: space-between;/*子元素两端对齐*/\r\n  align-items: center;/*子元素垂直居中*/\r\n  border-bottom:1px solid #555;\r\n  margin-top:25px;\r\n}\r\n/* 2：左侧【商品名称与价格】 */\r\n.leftImgTxt{\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.title{\r\n  margin-left:15px;\r\n}\r\n</style>"]}]}